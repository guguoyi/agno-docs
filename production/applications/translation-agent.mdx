---
title: "Translation Agent"
sidebarTitle: "Translation Agent"
description: "Emotion-aware translation agent with localized voice generation using Cartesia TTS."
---

An emotion-aware translation agent that translates text, analyzes the emotional tone, selects an appropriate voice, and generates localized audio output using Cartesia TTS.

## Multi-Step Workflow

The agent follows a sequential workflow:

1. **Identify**: Parse text and target language
2. **Translate**: Convert text preserving meaning
3. **Analyze Emotion**: Detect emotional tone
4. **Get Language Code**: Map to 2-letter code
5. **List Voices**: Get available Cartesia voices
6. **Select Voice**: Choose voice matching language + emotion
7. **Localize Voice**: Create language-specific clone
8. **Generate Audio**: Create TTS output

## Prerequisites

- Python 3.12+
- OpenAI API key
- Cartesia API key

## Setup

<Steps>
<Step title="Clone the repository">

```bash
git clone https://github.com/agno-agi/agno.git
cd agno
```

</Step>

<Step title="Create and activate virtual environment">

```bash
uv venv --python 3.12
source .venv/bin/activate
```

</Step>

<Step title="Install dependencies">

```bash
uv pip install -r cookbook/01_showcase/01_agents/translation_agent/requirements.in
```

</Step>

<Step title="Get Cartesia API key">

Sign up at [Cartesia](https://cartesia.ai) to get an API key.

</Step>

<Step title="Set environment variables">

```bash
export OPENAI_API_KEY=sk-***
export CARTESIA_API_KEY=your-cartesia-api-key
```

</Step>
</Steps>

## Run the Agent

### Basic Translation

Translate text with voice generation:

```bash
python cookbook/01_showcase/01_agents/translation_agent/examples/basic_translation.py
```

Demonstrates:
- Text translation
- Voice selection
- Audio file generation

### Emotional Content

Handle emotionally nuanced text:

```bash
python cookbook/01_showcase/01_agents/translation_agent/examples/emotional_content.py
```

Demonstrates:
- Emotion detection
- Voice matching for emotional tone
- Preserving sentiment in translation

### Batch Translate

Process multiple translations:

```bash
python cookbook/01_showcase/01_agents/translation_agent/examples/batch_translate.py
```

## Agent Configuration

```python
translation_agent = Agent(
    name="Translation Agent",
    description="Translates text and generates localized voice notes",
    instructions=AGENT_INSTRUCTIONS,
    model=OpenAIResponses(id="gpt-5.2"),
    tools=[CartesiaTools()],
    add_datetime_to_context=True,
    add_history_to_context=True,
    num_history_runs=5,
    enable_agentic_memory=True,
    markdown=True,
)
```

| Parameter | Purpose |
|-----------|---------|
| `model` | GPT-5.2 for translation and emotion analysis |
| `instructions` | Step-by-step workflow for translation |
| `CartesiaTools` | Voice listing, localization, and TTS |

## How It Works

### Translation Workflow

```
1. Identify text and target language
2. Translate text accurately
3. Analyze emotion of translated text
4. Get language code (fr, es, de, etc.)
5. List available Cartesia voices
6. Select voice matching language + emotion
7. Create localized voice clone
8. Generate audio with localized voice
9. Return translated text + audio
```

### Emotion-Voice Mapping

| Emotion | Voice Characteristics |
|---------|----------------------|
| Neutral | Clear, professional, moderate pace |
| Happy | Upbeat, energetic, slightly faster |
| Sad | Slower, softer, lower energy |
| Angry | Stronger, more intense |
| Excited | High energy, dynamic, faster |
| Calm | Soothing, steady, relaxed |
| Professional | Formal, clear, authoritative |

### Supported Languages

| Language | Code |
|----------|------|
| French | fr |
| Spanish | es |
| German | de |
| Italian | it |
| Portuguese | pt |
| Japanese | ja |
| Chinese | zh |
| Korean | ko |

## Troubleshooting

<AccordionGroup>
  <Accordion title="Cartesia API errors">
    Verify your API key:
    ```bash
    echo $CARTESIA_API_KEY
    ```
    Check your Cartesia dashboard for usage limits.
  </Accordion>
  <Accordion title="Voice not available for language">
    The agent will select the closest available voice and localize it. Some language combinations may have limited voice options.
  </Accordion>
  <Accordion title="Audio not generated">
    Check the response object for audio content:
    ```python
    if response.audio:
        print(f"Audio bytes: {len(response.audio[0].content)}")
    ```
  </Accordion>
</AccordionGroup>

## Source Code

- [Agent implementation](https://github.com/agno-agi/agno/tree/main/cookbook/01_showcase/01_agents/translation_agent/agent.py)
- [Example scripts](https://github.com/agno-agi/agno/tree/main/cookbook/01_showcase/01_agents/translation_agent/examples/)
